<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>P-Alert MVP - 認証</title>
</head>
<body style="font-family: sans-serif; max-width: 720px; margin: 24px auto; padding: 0 16px;">

  <h1>P-Alert MVP</h1>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div style="background:#f5f5f5; padding:12px; border-radius:8px; margin: 12px 0;">
        {% for msg in messages %}
          <div>• {{ msg }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  {% if mode == "register" %}
    <h2>新規登録</h2>
    <form method="post" action="/register">
      <div style="margin: 8px 0;">
        <label>メール：</label><br>
        <input name="email" type="email" required style="width:100%; padding:10px;">
      </div>
      <div style="margin: 8px 0;">
        <label>パスワード：</label><br>
        <input name="password" type="password" required style="width:100%; padding:10px;">
      </div>
      <button type="submit" style="padding:10px 16px;">登録</button>
    </form>

    <p style="margin-top:12px;">
      <a href="/login">ログインへ</a>
    </p>

  {% else %}
    <h2>ログイン</h2>
    <form method="post" action="/login">
      <div style="margin: 8px 0;">
        <label>メール：</label><br>
        <input name="email" type="email" required style="width:100%; padding:10px;">
      </div>
      <div style="margin: 8px 0;">
        <label>パスワード：</label><br>
        <input name="password" type="password" required style="width:100%; padding:10px;">
      </div>
      <button type="submit" style="padding:10px 16px;">ログイン</button>
    </form>

    <p style="margin-top:12px;">
      <a href="/register">新規登録へ</a>
    </p>
  {% endif %}

</body>
</html>
